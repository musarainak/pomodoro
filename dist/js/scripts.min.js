"use strict";var pause=!0,reset=!1,finish=!1;window.onload=function(){localStorage.storeMinutes||(localStorage.storeMinutes=25),localStorage.storeAlarm||(localStorage.storeAlarm="alarm-submarine"),document.getElementById("timer").innerHTML=localStorage.storeMinutes+":00",document.getElementById("customMinutes").value=localStorage.storeMinutes;for(var e=document.querySelectorAll(".alarm__check"),t=0;t<e.length;t++)e[t].getAttribute("data-alarm")==localStorage.storeAlarm&&e[t].classList.add("selected")};var notifyMe=function(){Push.create("Ieeeepa!!!",{body:"Hartu deskantsu txiki bat ;)",icon:"icon.png",timeout:8e3,vibrate:[100,100,100],onClick:function(){console.log(this)}})},checkSettingInput=function(){var e=document.getElementById("pause"),t=document.getElementById("settings"),s=document.getElementById("customMinutes").value,a=document.querySelector(".alarm__check.selected");if(isNaN(s)||" "==s)return alert("Erabili zenbakiak mesedez"),!1;document.querySelector(".reset").style.display="block",document.getElementById("timer").innerHTML=s+":00",localStorage.storeMinutes=s,localStorage.storeAlarm=a.getAttribute("data-alarm"),t.classList.contains("is-active")||(finish=!0),reset=!1,pause=!0,resetAll(),t.classList.add("is-active"),e.classList.add("is-active")},resetAll=function(){var e=document.getElementById("pause"),t=document.querySelector("audio#general");t.setAttribute("src","dist/sounds/"+localStorage.storeAlarm+".mp3"),t.load(),document.getElementById("timer").innerHTML=localStorage.storeMinutes+":00",e.disabled=!0,e.innerHTML="<span class='icon-play'></span>",reset=!0,pause=!0,countTimers(localStorage.storeMinutes,t)},startAll=function(){var e=document.querySelector("audio#general");e.setAttribute("src","dist/sounds/"+localStorage.storeAlarm+".mp3"),e.load(),document.getElementById("timer").innerHTML=localStorage.storeMinutes+":00",reset=!0,pause=!1,countTimers(localStorage.storeMinutes,e)},countTimers=function(e,t){var s=document.getElementById("pause"),a=document.getElementById("reset"),n=t,r=60,o=e-1,i=r,l=setInterval(function(){setTimeout(function(){a.disabled=!1},0),reset&&(reset=!1,document.querySelector(".circle__animation").style.strokeDashoffset=1256,finish||clearInterval(l),finish=!1,setTimeout(function(){s.disabled=!1},0)),pause||(0==--i&&o<1?(clearInterval(l),finish=!0,i=0,n.play(),s.disabled=!0,document.getElementById("timer").innerHTML=o.toString()+":"+(i<10?"0":"")+String(i),notifyMe()):i<0&&(i=r-1,o>0&&o--),document.getElementById("timer").innerHTML=o.toString()+":"+(i<10?"0":"")+String(i),document.querySelector(".circle__animation").style.strokeDashoffset=d-u*(d/c),u++)},1e3),c=r*e,u=1,d="1256"};document.addEventListener("click",function(e){if(e.preventDefault(),"settings"==e.target.id&&checkSettingInput(),"reset"==e.target.id&&resetAll(),"pause"==e.target.id&&(0==pause?(pause=!0,e.target.innerHTML="<span class='icon-play'></span>"):(pause=!1,e.target.innerHTML="<span class='icon-pause'></span>",e.target.classList.contains("is-active")||(finish=!1,startAll(),e.target.classList.add("is-active"),document.getElementById("settings").classList.add("is-active"))),reset=!1,document.getElementById("reset").disabled=!0,e.target.classList.toggle("is-play")),"icon-close"==e.target.id?document.querySelector("aside.panel").classList.remove("is-open"):"icon-settings"==e.target.id&&document.querySelector("aside.panel").classList.add("is-open"),"sound"==e.target.id){var t=document.getElementsByTagName("audio");for(n=0;n<t.length;n++)t[n].pause()}if(e.target.classList.contains("alarm__check")){var s=document.querySelectorAll(".selected"),a=document.querySelector("audio#check-sound");a.setAttribute("src","dist/sounds/"+e.target.dataset.alarm+".mp3"),a.load(),a.play();for(var n=0;n<s.length;n++)s[n].classList.remove("selected");e.target.classList.add("selected")}},!1),document.addEventListener("keyup",function(e){27==e.keyCode&&document.querySelector("aside.panel").classList.remove("is-open")});