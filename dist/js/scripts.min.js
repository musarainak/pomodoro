"use strict";function checkSettingInput(){reset=!1,pause=!0;var e=document.getElementById("customMinutes").value;selectedSound=document.querySelector(".alarm__item.selected");var t=new Audio("dist/sounds/"+selectedSound.getAttribute("data-alarm")+".mp3");if(document.getElementById("timer").innerHTML=e+":00",isNaN(e)||""==e)return alert("Erabili zenbakiak mesedez"),!1;document.querySelector(".reset").style.display="block",elSettings.disabled=!0,localStorage.storeMinutes=e,localStorage.storeAlarm=selectedSound.getAttribute("data-alarm"),countTimers(e,t)}function resetAll(){reset=!0,pause=!0,el.disabled=!0;var e=document.getElementById("customMinutes").value;selectedSound=document.querySelector(".alarm__item.selected");var t=new Audio("dist/sounds/"+selectedSound.getAttribute("data-alarm")+".mp3");document.getElementById("timer").innerHTML=e+":00",countTimers(e,t),el.innerHTML="Hasi!"}function countTimers(e,t){var n=t,s=60,i=e-1,l=s,a=setInterval(function(){setTimeout(function(){elReset.disabled=!1},1e3),reset&&(pause=!0,reset=!1,finish||clearInterval(a),setTimeout(function(){el.disabled=!1},1e3)),pause||(--l<0&&(l=s-1,i>0?i--:(clearInterval(a),finish=!0,l=0,n.play(),el.innerHTML="Hasi!",notifyMe())),document.getElementById("timer").innerHTML=i.toString()+":"+(l<10?"0":"")+String(l))},1e3)}function notifyMe(){Push.create("Ieeeepa!!!",{body:"Hartu deskantsu txiki bat ;)",icon:"icon.png",timeout:8e3,vibrate:[100,100,100],onClick:function(){console.log(this)}})}var el=document.getElementById("pause"),elSettings=document.getElementById("settings"),elReset=document.getElementById("reset"),pause=!0,reset=!1,finish=!1,selectedSound=document.querySelector(".alarm__item.selected"),setMinutes=document.getElementById("customMinutes"),trySound=new Audio;setMinutes.value=localStorage.storeMinutes,window.onload=function(){for(var e=document.querySelectorAll(".alarm__item"),t=0;t<e.length;t++)e[t].getAttribute("data-alarm")==localStorage.storeAlarm&&e[t].classList.add("selected")},document.addEventListener("click",function(e){if(e.target.classList.contains("alarm__item")){for(var t=document.querySelectorAll(".selected"),n=0;n<t.length;n++)t[n].classList.remove("selected");e.target.classList.add("selected")}},!1),elSettings.addEventListener("click",function(){checkSettingInput()}),elReset.addEventListener("click",function(){resetAll()}),el.addEventListener("click",function(){0==pause?(pause=!0,el.innerHTML="Segi!"):(pause=!1,el.innerHTML="Gelditu!"),reset=!1,elReset.disabled=!0,el.classList.toggle("is-play")}),document.addEventListener("click",function(e){e.target.classList.contains("alarm__check")&&(trySound.pause(),(trySound=new Audio("dist/sounds/"+e.target.attributes["data-alarm"].value+".mp3")).play())},!1),Push.Permission.request();