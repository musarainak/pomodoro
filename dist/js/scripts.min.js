"use strict";function checkSettingInput(){reset=!1,pause=!0;var e=document.getElementById("customMinutes").value;selectedSound=document.querySelector(".alarm__check.selected");new Audio("dist/sounds/"+selectedSound.getAttribute("data-alarm")+".mp3");if(document.getElementById("timer").innerHTML=e+":00",isNaN(e)||""==e)return alert("Erabili zenbakiak mesedez"),!1;document.querySelector(".reset").style.display="block",localStorage.storeMinutes=e,localStorage.storeAlarm=selectedSound.getAttribute("data-alarm"),elSettings.classList.contains("is-active")||(finish=!0),resetAll(),elSettings.classList.add("is-active"),el.classList.add("is-active")}function resetAll(){reset=!0,pause=!0,el.disabled=!0,el.innerHTML="<span class='icon-play'></span>";var e=new Audio("dist/sounds/"+localStorage.storeAlarm+".mp3");document.getElementById("timer").innerHTML=localStorage.storeMinutes+":00",countTimers(localStorage.storeMinutes,e)}function startAll(){reset=!0,pause=!1;var e=new Audio("dist/sounds/"+localStorage.storeAlarm+".mp3");document.getElementById("timer").innerHTML=localStorage.storeMinutes+":00",countTimers(localStorage.storeMinutes,e)}function countTimers(e,t){var s=t,n=60,i=e-1,l=n,a=setInterval(function(){setTimeout(function(){elReset.disabled=!1},0),reset&&(reset=!1,document.querySelector(".circle__animation").style.strokeDashoffset=1256,finish||(clearInterval(a),finish=!1),finish=!1,setTimeout(function(){el.disabled=!1},0)),pause||(c>1&&(0==l&&i<1?(clearInterval(a),finish=!0,l=0,s.play(),el.disabled=!0,document.getElementById("timer").innerHTML=i.toString()+":"+(l<10?"0":"")+String(l),notifyMe()):l<0&&(l=n-1,i>0&&i--),document.getElementById("timer").innerHTML=i.toString()+":"+(l<10?"0":"")+String(l)),l--,document.querySelector(".circle__animation").style.strokeDashoffset=r-c*(r/o),c++)},1e3),o=n*e+1,c=1,r="1256"}function notifyMe(){Push.create("Ieeeepa!!!",{body:"Hartu deskantsu txiki bat ;)",icon:"icon.png",timeout:8e3,vibrate:[100,100,100],onClick:function(){console.log(this)}})}var el=document.getElementById("pause"),elSettings=document.getElementById("settings"),elReset=document.getElementById("reset"),pause=!0,reset=!1,finish=!1,selectedSound=document.querySelector(".alarm__check.selected"),setMinutes=document.getElementById("customMinutes");localStorage.storeMinutes=25,localStorage.storeAlarm="alarm-submarine",window.onload=function(){document.getElementById("timer").innerHTML=localStorage.storeMinutes+":00",document.getElementById("customMinutes").value=localStorage.storeMinutes;for(var e=document.querySelectorAll(".alarm__check"),t=0;t<e.length;t++)e[t].getAttribute("data-alarm")==localStorage.storeAlarm&&e[t].classList.add("selected")},elSettings.addEventListener("click",function(){checkSettingInput()}),elReset.addEventListener("click",function(){resetAll()}),el.addEventListener("click",function(){0==pause?(pause=!0,el.innerHTML="<span class='icon-play'></span>"):(pause=!1,el.innerHTML="<span class='icon-pause'></span>",el.classList.contains("is-active")||(finish=!1,startAll(),el.classList.add("is-active"),elSettings.classList.add("is-active"))),reset=!1,elReset.disabled=!0,el.classList.toggle("is-play")}),document.addEventListener("click",function(e){if(e.preventDefault(),"icon-close"==e.target.id?document.querySelector("aside.panel").classList.remove("is-open"):"icon-settings"==e.target.id&&document.querySelector("aside.panel").classList.add("is-open"),e.target.classList.contains("alarm__check")){for(var t=document.querySelectorAll(".selected"),s=0;s<t.length;s++)t[s].classList.remove("selected");e.target.classList.add("selected")}},!1),Push.Permission.request();